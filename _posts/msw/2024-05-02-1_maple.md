---
title: "[메이플스토리 월드] 1. 기본 개념"

categories: 
    - MSW
tag: 
    - [메이플스토리 월드, 게임 프로그래밍, Lua]
toc: true

date: 2024-05-02
last_modified_at: 2024-05-02
---


## 1️⃣ 기본 용어

- 엔티티 : 메이플스토리 월드 내의 객체

- 컴포넌트 :엔티티를 구성하는 기능

- 프로퍼티: 컴포넌트의 세부 속성



## 2️⃣ 모델

### 🔸모델이란

원하는 엔티티를 만들려면, 엔티티에 컴포넌트를 추가하고 프로퍼티를 수정해야 한다.

모델은 위 정보들을 저장해 재사용성을 높인다.

원하는 엔티티의 콘텍스트 메뉴에서 **Create Model From Entity**를 클릭하면 엔티티를 모델화 할 수 있다.



### 🔸모델의 확장

모델은 자신의 컴포넌트와 프로퍼티 값을 물려받은 확장 모델을 생성할 수 있다.

워크스페이스에서 원하는 모델을 선택 후 컨텍스트 메뉴에서 **Extend**를 클릭해 확장 모델은 만든다.

자식 모델은 부모 모델의 컴포넌트와 프로퍼티 초깃값을 물려받는다.

부모 모델을 수정하면, 자식 모델에도 같은 변화가 적용된다.

모델 간의 관계는 프로퍼티 에디터의 **Model Extension Info**로 확인할 수 있다.



### 🔸신규 모델 생성

워크스페이스의 콘텍스트 메뉴에서 **Create Model**을 클릭해서 빈 모델을 생성합니다.

또는 이미 배치 되어있는 엔티티의 콘텍스트 메뉴의 **Create Model From Entity**를 클릭해 엔티티 모델을 만들 수 있습니다.



### 🔸모델의 엔티티 생성

원하는 모델을 씬으로 드래그 하면 됩니다.



### 🔸모델 프로퍼티

프로퍼티 에디터 최상단에는 어떤 컴포넌트에도 속하지 않은 프로퍼티있는데, 이것이 모델 프로퍼티이다.

모델 프로퍼티는 모델에 포함된 컴포넌트의 일부 프로퍼티를 즐겨찾기처럼 모은 것이다.



## 3️⃣ 맵 레이어

### 🔸맵레이어 이해하기

레이어란 맵 화면 위에 올리는 투명한 판이다.

판 위에 여러 엔티티를 올리고, 또 다른 판을 올리면 새로운 엔티티를 배치할 수 있다.



### 🔸레이어 우선순위

메이커에서 엔티티 순서는 아래 순서로 결정된다.

1. Map Layer
2. SpriteRendererComponent의 OrderInLayer 프로퍼티
3. TransformComponent의 Position Z 값

<br>

모델은 배치 편의를 위해 유형 별로 OrderInLayer 기본값이 정해져 있다.

- 오브젝트 : 0
- 타일 : 1
- 몬스터, NPC, 발판, 포탈, 아이템 등 : 2
- 타 이용자의 아바타 : 3
- 나의 아바타 : 4



### 🔸플레이어 아바타

플레이어 아바타는 엔티티지만 특정 레이어에 귀속되지 않음.

대신 현제 밟고 있는 엔티티(타일, 발판 등)의 맵 레이어로 소속이 계속 바뀐다.

나무 레이어와 발판 레이어의 우선순위에 따라 플레이어는 나무의 앞 또는 뒤로 지나간다.





## 4️⃣ 좌표

### 🔸월드 좌표

월드 좌표는 월드에서 특정 위치 값.

엔티티의 프로퍼티 중 TransformComponent의 WorldPosition이 월드 좌표이다.



### 🔸스크린 좌표

스크린 좌표는 화면 상의 위치 값.

스크린에 UI 요소를 배치한다.

유저 디바이스에 따라 원하는 곳에 UI를 보여주려면 Anchor Presets 기능을 활용해야 한다.



## 5️⃣ 타입

### 🔸타입 이해하기

메이플스토리 월드에서 타입이란 프로퍼티 및 함수를 조합하여 하나의 새로운 데이터 유형은 만드는 사용자 정의 자료형이다.

타입을 활용해 유사한 데이터를  한 번에 제어하고 관리할 수 있다.



### 🔸타입과 컴포넌트의 차이

- 타입은 엔티티에 추가할 수 없다.
- 타입은 실행 제어 기능을 지원하지 않는다.
- 타입에는 이벤트 핸들러가  없다.
- 각 타입의 용도에 맞는 기본 이벤트 함수가 제공되기도 한다.



### 🔸타입의 특징과 종류

#### · Event Type

새로운 EventType을 정의할 때 사용한다. 

Event System과 연동된다.

#### · ItemType

무기, 포션, 기타 등 아이템을 분류해 정의할 때 사용한다. 

ItemService와 연동됨.

스크립트에서 OnCreate()를 사용할 수 있다.

#### · BTNodeType

몬스터나 NPC의 Action 노드를 생성할 때 BTNodeType 스크립트를 사용함.

Action 노드는 엔티티의 행동 또는 행동에 대한 조건을 정의한다.

#### · State Type

새로운 상태를 만들 때 사용한다.

스크립트에서 기본 이벤트 함수인 OnEnter(), OnUpdate(), OnExit(), OnConditionCheck()를 사용할 수 있다.

#### · Struct Type

사용자가 직접 변수들을 묶어서 사용할 때 유용하다.




***
<br>

    이 글은 메이플스토리 월드 기본 제작 가이드를 참고하여 작성했습니다.
    잘못된 내용이나 오타가 있을 경우 메일로 지적바랍니다!😄

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}